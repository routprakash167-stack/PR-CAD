<!DOCTYPE html>
<html>
<head>
  <title>PR CAD - 2D Design Studio</title>
  <style>
    body {
      margin: 0;
      background: #0f0f0f;
      color: white;
      font-family: Arial;
    }

    header {
      background: #111;
      padding: 15px;
      text-align: center;
      font-size: 22px;
      font-weight: bold;
      color: cyan;
    }

    .toolbar {
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: 10px;
      background: #1a1a1a;
      flex-wrap: wrap;
    }

    button {
      background: #222;
      color: white;
      border: 1px solid cyan;
      padding: 8px 12px;
      cursor: pointer;
    }

    button:hover {
      background: cyan;
      color: black;
    }

    canvas {
      background: #000;
      display: block;
      margin: auto;
      border: 1px solid #333;
      touch-action: none;
    }
  </style>
</head>
<body>

<header>PR CAD - 2D Drawing Engine</header>

<div class="toolbar">
  <button onclick="setTool('line')">Line</button>
  <button onclick="setTool('rect')">Rectangle</button>
  <button onclick="setTool('circle')">Circle</button>
  <button onclick="clearCanvas()">Clear</button>
  <button onclick="saveProject()">Save</button>
</div>

<canvas id="canvas" width="900" height="500"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let drawing = false;
let startX, startY;
let tool = "line";

function setTool(t) {
  tool = t;
}

function getPosition(e) {
  const rect = canvas.getBoundingClientRect();
  if (e.touches) {
    return {
      x: e.touches[0].clientX - rect.left,
      y: e.touches[0].clientY - rect.top
    };
  }
  return {
    x: e.clientX - rect.left,
    y: e.clientY - rect.top
  };
}

canvas.addEventListener("mousedown", startDraw);
canvas.addEventListener("mousemove", draw);
canvas.addEventListener("mouseup", stopDraw);

canvas.addEventListener("touchstart", startDraw);
canvas.addEventListener("touchmove", draw);
canvas.addEventListener("touchend", stopDraw);

function startDraw(e) {
  drawing = true;
  const pos = getPosition(e);
  startX = pos.x;
  startY = pos.y;
}

function draw(e) {
  if (!drawing) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  const pos = getPosition(e);
  ctx.strokeStyle = "cyan";
  ctx.lineWidth = 2;

  if (tool === "line") {
    ctx.beginPath();
    ctx.moveTo(startX, startY);
    ctx.lineTo(pos.x, pos.y);
    ctx.stroke();
  }

  if (tool === "rect") {
    ctx.strokeRect(startX, startY, pos.x - startX, pos.y - startY);
  }

  if (tool === "circle") {
    const radius = Math.sqrt(
      Math.pow(pos.x - startX, 2) +
      Math.pow(pos.y - startY, 2)
    );
    ctx.beginPath();
    ctx.arc(startX, startY, radius, 0, Math.PI * 2);
    ctx.stroke();
  }
}

function stopDraw() {
  drawing = false;
}

function clearCanvas() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
}

function saveProject() {
  const data = canvas.toDataURL();
  const link = document.createElement("a");
  link.download = "prcad_design.png";
  link.href = data;
  link.click();
}
</script>

</body>
</html>
